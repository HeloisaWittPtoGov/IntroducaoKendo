<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>

	<link href="img/icons/pg.favicon.png" rel="shortcut icon">

	<link href="css/pg.kendo.common.min.css" rel="stylesheet">
	<link href="css/pg.kendo.blueopal.min.css" rel="stylesheet">
	<link href="css/pg.kendo.blueopal.mobile.min.css" rel="stylesheet">
	<link href="css/pg.kendo.colors.min.css" rel="stylesheet">
	<link href="css/pg.icons.css" rel="stylesheet">
	<link href="css/pg.libFrontbox.css" rel="stylesheet">
	<link href="css/pg.multiple-select.css" rel="stylesheet">
	<link href="css/pg.loading.css" rel="stylesheet">
	<link href="css/kendo.global.min.css" rel="stylesheet">
	<link href="css/ckeditor.pontogov.css" rel="stylesheet">
	<link rel="stylesheet" href="js/prettyPhoto/css/prettyPhoto.css" type="text/css" media="screen" />
	<link href="js/rs-plugin/css/settings.css" rel="stylesheet">
	<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/themes/redmond/jquery-ui.css">


	<script src="js/libJquery.js" charset="ISO-8859-1"></script>
	<script src="js/jszip.min.js" charset="ISO-8859-1"></script>
	<script src="js/kendo.all.min.js" charset="ISO-8859-1"></script>
	<script src="js/kendo.messages.pt-BR.min.js" charset="ISO-8859-1"></script>
	<script src="js/kendo.masked.date.picker.js" charset="ISO-8859-1"></script>
	<script src="js/kendo.culture.pt-BR.min.js" charset="ISO-8859-1"></script>
	<script src="js/pako_deflate.min.js" charset="ISO-8859-1"></script>
	<script src="js/libPgFilter.js" charset="ISO-8859-1"></script>

	<script src="js/fusion/fusioncharts.js"></script>
	<script src="js/fusion/themes/fusioncharts.theme.fint.js"></script>

	<script src="js/libUtils.js" charset="ISO-8859-1"></script>
	<script src="js/libFrontbox.js" charset="ISO-8859-1"></script>
	<script src="js/kendo.timezones.min.js" charset="ISO-8859-1"></script>
	<script src="js/ckeditor/ckeditor.js"></script>
	<script src="js/jquery-ui.js"></script>
	<script src="js/multiple-select.js"></script>
	<script src="js/prettyPhoto/js/jquery.prettyPhoto.js" type="text/javascript"></script>
	<script src="js/rs-plugin/js/jquery.themepunch.tools.min.js"></script>
	<script src="js/rs-plugin/js/jquery.themepunch.revolution.min.js"></script>
	<script src="js/mascara.js" type="text/javascript"></script>
	<script src="js/jquery.mask.js" charset="ISO-8859-1"></script>
	<style>
		.k-splitbar .k-resize-handle {
			background: none;
			width: 0;
			height: 0;
		}
	</style>

</head>

<script>
	kendo.culture("pt-BR")

	let funcionarios = [
		{ id: "1", nomeCompleto: "Ana", cargo: "Auxiliar Administrativo", salario: 2500.00, dataAdmissao: "03/05/2025", status: "Sim" },
		{ id: "2", nomeCompleto: "Joao", cargo: "Auxiliar Geral", salario: 2000.00, dataAdmissao: "03/05/2025", status: "Não" }
	];
	$(function () {

		$("#BtnPesquisar").kendoButton({
			click: function () {
				let filtros = []

				if ($("#nomeFiltro").val().trim() != "") {
					filtros.push({ field: "nomeCompleto", operator: "contains", value: $("#nomeFiltro").val() })
				}
				if ($("#cargoFiltro").val().trim() != "") {
					filtros.push({ field: "cargo", operator: "contains", value: $("#cargoFiltro").val() })
				}
				$("#GrdConsultaFuncionarios").data("kendoGrid").dataSource.filter(filtros);

				$("#BarAcoes").data("kendoToolBar").enable("#BtnEditar", false);
			}
		})

		$("#BarAcoes").kendoToolBar({
			items: [
				{
					type: "spacer",
				},
				{
					type: "buttonGroup",
					buttons: [
						{
							text: "Incluir",
							id: "BtnIncluir",
							click: function () {
								$("#WinCadastroFuncionarios").data("kendoWindow").open();
								$("#WinCadastroFuncionarios #id").val("");
								$("#WinCadastroFuncionarios #nomeCompleto").val("");
								$("#WinCadastroFuncionarios #cargo").val("");
								$("#WinCadastroFuncionarios #salario").data("kendoNumericTextBox").value("");
								$("#WinCadastroFuncionarios #dataAdmissao").val("");
								$("#WinCadastroFuncionarios #status").prop("checked", false)
							}
						},
						{
							text: "Editar",
							id: "BtnEditar",
							enable: false,
							click: function () {
								$("#WinCadastroFuncionarios").data("kendoWindow").open();
								let GrdConsultaFuncionario = $("#GrdConsultaFuncionarios").data("kendoGrid");
								let rstGrid = GrdConsultaFuncionario.dataItem(GrdConsultaFuncionario.select());
								$("#WinCadastroFuncionarios #id").val(rstGrid.id);
								$("#WinCadastroFuncionarios #nomeCompleto").val(rstGrid.nomeCompleto);
								$("#WinCadastroFuncionarios #cargo").val(rstGrid.cargo);
								$("#WinCadastroFuncionarios #salario").data("kendoNumericTextBox").value(rstGrid.salario);
								$("#WinCadastroFuncionarios #dataAdmissao").val(rstGrid.dataAdmissao);
								$("#WinCadastroFuncionarios #FlgStatus").prop("checked", rstGrid.status == "Sim");

							}
						}
					]
				}
			]
		});


		$("#GrdConsultaFuncionarios").kendoGrid({
			toolbar: ["excel"],
			sortable: true,

			columns: [
				{
					field: "id",
					title: "ID",
					width: "80px"
				},
				{
					field: "nomeCompleto",
					title: "Nome",
				},
				{
					field: "cargo",
					title: "Cargo",
				},
				{
					field: "salario",
					title: "Salario",
					format: "{0:c}",
				},
				{
					field: "dataAdmissao",
					title: "Data de Admissao",
				},
				{
					field: "status",
					title: "Status Ativo",
					width: "80px"
				}
			],
			dataSource: {
				transport: {
					read: function (options) {
						options.success(funcionarios)
					}
				}
			},
			selectable: "row",
			change: function () {
				let GrdConsultaFuncionarios = $("#GrdConsultaFuncionarios").data("kendoGrid");
				let item = GrdConsultaFuncionarios.dataItem(GrdConsultaFuncionarios.select());
				$("#tabStripConsultaFuncionarios #id").val(item.id);
				$("#tabStripConsultaFuncionarios #nomeCompleto").val(item.nomeCompleto);
				$("#tabStripConsultaFuncionarios #cargo").val(item.cargo);
				$("#tabStripConsultaFuncionarios #salario").val(item.salario);
				$("#tabStripConsultaFuncionarios #dataAdmissao").val(item.dataAdmissao);
				$("#BarAcoes").data("kendoToolBar").enable("#BtnEditar");
			}

		});

		$("#WinCadastroFuncionarios").kendoWindow({
			width: 800,
			visible: false,
			title: "Cadastro de Funcionarios",
			maxWidth: 800,
			maxHeight: 170,
			position: {
				top: 140,
				left: "20%"
			}
		});

		$("#BarAcoesWin").kendoToolBar({
			items: [
				{
					type: "spacer",
				},
				{
					type: "buttonGroup",
					buttons: [
						{
							text: "Gravar",
							id: "BtnGravar",
							click: function () {

								let idCadastro = $("#id").val()
								let indiceId = funcionarios.findIndex(i => i.id == idCadastro)

								let strMensagem = "";

								if ($("#WinCadastroFuncionarios #nomeCompleto").val().trim() == "") {
									strMensagem = strMensagem + "O campo Nome é de preenchimento obrigatório.\n"
								} else {
									let nomeInformado = $("#WinCadastroFuncionarios #nomeCompleto").val().trim().toLowerCase();
									let verificaNome = funcionarios.find(function (i) {
										return i.nomeCompleto.trim().toLowerCase() == nomeInformado && i.id != idCadastro
									})
									if (verificaNome) {
										strMensagem = strMensagem + "Já existe um funcinario cadastrado com o nome informado.\n"
									}
								}

								if ($("#WinCadastroFuncionarios #cargo").val().trim() == "") {
									strMensagem = strMensagem + "O campo cargo é de preenchimento obrigatório.\n"
								}

								if ($("#WinCadastroFuncionarios #salario").val().trim() <= 0) {
									strMensagem = strMensagem + "O salario deve ser maior que 0,00."
								}

								if (strMensagem != "") {
									alert(strMensagem)
								} else {
									if (indiceId >= 0) {
										funcionarios[indiceId] = {
											id: idCadastro,
											nomeCompleto: $("#WinCadastroFuncionarios #nomeCompleto").val(),
											cargo: $("#WinCadastroFuncionarios #cargo").val(),
											salario: $("#WinCadastroFuncionarios #salario").data("kendoNumericTextBox").value(),
											dataAdmissao: $("#WinCadastroFuncionarios #dataAdmissao").val(),
											status: $("#WinCadastroFuncionarios #FlgStatus").is(":checked") ? "Sim" : "Não"
										}
									}
									else {
										funcionarios.push({
											id: $("#GrdConsultaFuncionarios").data("kendoGrid").dataSource.data().length + 1,
											nomeCompleto: $("#WinCadastroFuncionarios #nomeCompleto").val(),
											cargo: $("#WinCadastroFuncionarios #cargo").val(),
											salario: $("#WinCadastroFuncionarios #salario").data("kendoNumericTextBox").value(),
											dataAdmissao: $("#WinCadastroFuncionarios #dataAdmissao").val(),
											status: $("#WinCadastroFuncionarios #FlgStatus").is("Checked") ? "Sim" : "Não"
										})
									}
								}
								$("#BtnPesquisar").click();
							}

						},
						{
							text: "Excluir",
							id: "BtnExcluir",
							click: function () {
								let GrdConsultaFuncionarios = $("#GrdConsultaFuncionarios").data("kendoGrid");
								let item = GrdConsultaFuncionarios.dataItem(GrdConsultaFuncionarios.select());
								let indiceRemover = funcionarios.findIndex(i => i.id === item.id)
								funcionarios.splice(indiceRemover, 1)
								$("#BtnPesquisar").click()
							}
						},
						{
							text: "Limpar",
							id: "BtnLimpar",
							click: function () {
								$("#WinCadastroFuncionarios #id").val("");
								$("#WinCadastroFuncionarios #nomeCompleto").val("");
								$("#WinCadastroFuncionarios #cargo").val("");
								$("#WinCadastroFuncionarios #salario").data("kendoNumericTextBox").value("");
								$("#WinCadastroFuncionarios #dataAdmissao").val("");
								$("#WinCadastroFuncionarios #FlgStatus").prop("checked", false);
							}
						},
						{
							text: "Fechar",
							id: "BtnFechar",
							click: function () {
								$("#WinCadastroFuncionarios").data("kendoWindow").close();
							}
						},
					]
				}
			]
		})


		$("#WinCadastroFuncionarios #salario").kendoNumericTextBox({
			decimals: 2,
			format: "c2",
		})

		$("#WinCadastroFuncionarios #dataAdmissao").kendoDatePicker({
			dateInput: true,
			format: "dd/MM/yyyy"
		})

		$("#tabStripConsultaFuncionarios").kendoTabStrip()

		$("#splConsulta").kendoSplitter({
			orientation: "vertical",
			panes: [{ min: "25px" }, { min: "100px" }, {}],
		})
	});
</script>

<body>
	<div id="splConsulta" style="height: 100%;">
		<div id="splHead">
			<div class="k-bg-blue screen-filter-content">
				<input id="nomeFiltro" class="k-textbox" type="text" placeholder="Informe um Nome">
				<input id="cargoFiltro" class="k-textbox" type="text" placeholder="Informe um Cargo">
				<span id="BtnPesquisar">Pesquisar</span>
			</div>
			<div id="BarAcoes"></div>
		</div>

		<div id="splMiddle">
			<div id="GrdConsultaFuncionarios"></div>
		</div>

		<div id="splFooter">
			<div id="tabStripConsultaFuncionarios">
				<ul>
					<li class="k-state-active">Detalhes</li>
				</ul>
				<div id="infoDetalhes">
					<table>
						<tr>
							<td style="text-align: right; width: 100px;">
								ID:
							</td>
							<td>
								<input id="id" type="text" class="k-textbox k-input-disabled" style="width: 80px;">
							</td>
						</tr>
					</table>
					<table>
						<tr>
							<td style="text-align: right; width: 100px;">
								Nome:
							</td>
							<td>
								<input id="nomeCompleto" type="text" class="k-textbox k-input-disabled"
									style="width: 600px;">
							</td>
						</tr>
					</table>
					<table>
						<tr>
							<td style="text-align: right; width: 100px;">
								Cargo:
							</td>
							<td>
								<input id="cargo" type="text" class="k-textbox k-input-disabled" style="width: 600px;">
							</td>
						</tr>
					</table>
					<table>
						<tr>
							<td style="text-align: right; width: 100px;">
								Salario:
							</td>
							<td>
								<input id="salario" type="text" class="k-textbox k-input-disabled"
									style="width: 120px;">
							</td>
							<td style="text-align: right; width: 100px;">
								Data Admisao:
							</td>
							<td>
								<input id="dataAdmissao" type="text" class="k-textbox k-input-disabled"
									style="width: 120px;">
							</td>
						</tr>
					</table>
				</div>
			</div>
		</div>
	</div>

	<div id="WinCadastroFuncionarios" style="display: flex; justify-content: center; align-items: center;">
		<div id="form" class="k-form" style="width: 100%;">
			<form>
				<table width="100%" cellpadding="0" cellspancing="2" role="presentation">
					<tr>
						<td style="text-align: right; width: 120px;">
							ID:
						</td>
						<td>
							<input id="id" type="text" class="k-textbox k-input-disabled" style="width: 80px;">
						</td>
					</tr>
				</table>
				<table width="100%" cellpadding="0" cellspancing="2" role="presentation">
					<tr>
						<td style="text-align: right; width: 120px;" class="k-required">
							Nome:
						</td>
						<td>
							<input id="nomeCompleto" type="text" class="k-textbox" style="width: 600px;">
						</td>
					</tr>
				</table>
				<table width="100%" cellpadding="0" cellspancing="2" role="presentation">
					<tr>
						<td style="text-align: right; width: 120px;" class="k-required">
							Cargo:
						</td>
						<td>
							<input id="cargo" type="text" class="k-textbox" style="width: 600px;">
						</td>
					</tr>
				</table>
				<table width="100%" cellpadding="0" cellspancing="2" role="presentation">
					<tr>
						<td style="text-align: right; width: 120px;" class="k-required">
							Salario:
						</td>
						<td>
							<input id="salario">
						</td>
						<td style="text-align: right; width: 273px;">
							Data de Admissao:
						</td>
						<td>
							<input id="dataAdmissao">
						</td>
					</tr>
				</table>
				<table width="100%" cellpadding="0" cellspancing="2" role="presentation">
					<tr>
						<td>
							<input id="FlgStatus" type="checkbox" style="margin-left: 120px;" class="k-checkbox">
							<label for="FlgStatus" class="k-checkbox-label">Status Ativo</label>
						</td>
					</tr>
				</table>
				<div id="BarAcoesWin"></div>
			</form>
		</div>
	</div>
</body>

</html>